<?xml version="1.0" encoding="UTF-8"?>
<SQL>
<query><sqlindex>1</sqlindex><statment>CREATE OR REPLACE TRIGGER TRANSEMPBASIC&#xD;
BEFORE INSERT OR UPDATE ON EMPBASIC FOR EACH ROW&#xD;
BEGIN IF INSERTING THEN INSERT INTO LOGIN_USERS (ID,EMPCODE,NAME,end_serv, email) VALUES (:NEW.EMPCODE,:NEW.EMPCODE,:NEW.EMPNAME,:NEW.end_serv,:NEW.email); insert into COMMON_EMPLOYEE (id,FIRSTNAME,LASTNAME,JOBTITLE,EMAIL,USERS,EMPCODE) VALUES (:NEW.EMPCODE,:NEW.EMPNAME,:NEW.EMPNAME,'general',:NEW.email,:NEW.EMPCODE,:NEW.EMPCODE); insert into SECURITY_USERS (id,USERNAME,PASSWORD,DEFAULTLOCALE,DEFAULTAPPLICATION,ISACTIVE,ISEMPLOYEE) VALUES (:NEW.EMPCODE,trim(leading 0 from :new.empcode),'123',1,12,1,1); insert into SECURITY_USER_ROLES (users,role) values (:NEW.EMPCODE,1); ELSE update LOGIN_USERS set name=:NEW.EMPNAME , end_serv=:new.end_serv , email=:new.email where EMPCODE=:old.EMPCODE; update COMMON_EMPLOYEE set FIRSTNAME=:NEW.EMPNAME,LASTNAME=:NEW.EMPNAME where EMPCODE=:old.EMPCODE; update security_users set end_serv=:new.end_serv where username=trim(leading 0 from :old.empcode); END IF; END;</statment></query><query><sqlindex>2</sqlindex><statment>CREATE OR REPLACE TRIGGER UPDATE_TRANS_CODE AFTER UPDATE OF TRANS_CODE ON UN_SPECIFIED_DELAIY_HOUR&#xD;
REFERENCING OLD AS OLD_DATA&#xD;
NEW AS NEW_DATA&#xD;
FOR EACH ROW&#xD;
BEGIN&#xD;
UPDATE UN_SPECIFIED_HOUR&#xD;
SET UN_SPECIFIED_HOUR.TRANS_CODE=NEW_DATA.TRANS_CODE&#xD;
WHERE UN_SPECIFIED_HOUR.EMP_CODE=OLD_DATA.EMP_CODE AND TO_DATE(UN_SPECIFIED_HOUR.DATE_)=TO_DATE(OLD_DATA.DATE_)&#xD;
END</statment></query></SQL>
